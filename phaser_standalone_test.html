<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Phaserç‹¬ç«‹æµ‹è¯•</title>
    <!-- å¼ºåˆ¶ä½¿ç”¨æœ€æ–°Phaser CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        #gameContainer {
            width: 800px;
            height: 600px;
            margin: 20px auto;
            border: 4px solid #4CAF50; /* æ›´ç²—çš„ç»¿è¾¹ */
            position: relative;
            overflow: hidden;
        }
        .debug-info {
            margin-top: 10px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>ğŸ® Phaser 3 ç‹¬ç«‹æµ‹è¯•é¡µé¢</h1>
    <div id="gameContainer"></div>
    <div class="debug-info">æ­¤é¡µé¢ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨JSæ–‡ä»¶ï¼Œç”¨äºéªŒè¯Phaseræ ¸å¿ƒåŠŸèƒ½</div>

    <script>
        // ç‹¬ç«‹Phaseræ¸¸æˆå®ä¾‹ï¼ˆå®Œå…¨éš”ç¦»ï¼‰
        window.addEventListener('load', function() {
            console.log("ğŸš€ å¼€å§‹åˆå§‹åŒ–ç‹¬ç«‹Phaserå®ä¾‹...");
            
            // æ¸¸æˆé…ç½®
            const config = {
                type: Phaser.AUTO,
                width: 800,
                height: 600,
                parent: 'gameContainer', // ç»‘å®šåˆ°æŒ‡å®šå®¹å™¨
                backgroundColor: '#1a237e',
                scene: {
                    preload: preload,
                    create: create,
                    update: update
                },
                physics: {
                    default: 'arcade',
                    arcade: {
                        gravity: { y: 0 },
                        debug: false
                    }
                }
            };

            // åˆ›å»ºæ¸¸æˆ
            const game = new Phaser.Game(config);
            
            // åœºæ™¯å‡½æ•°
            function preload() {
                console.log("ğŸ“¥ é¢„åŠ è½½èµ„æºé˜¶æ®µå¼€å§‹...");
                // åŠ è½½ä¸€ä¸ªæµ‹è¯•å›¾ç‰‡
                this.load.image('testTile', 'assets/images/tiles/grass_tile.png');
                this.load.on('filecomplete', function (key, type) {
                    console.log(`âœ… èµ„æºåŠ è½½å®Œæˆ: ${type} - ${key}`);
                });
            }
            
            function create() {
                console.log("âœ¨ è¿›å…¥åœºæ™¯åˆ›å»ºé˜¶æ®µ");
                
                // æ·»åŠ æ ‡é¢˜æ–‡å­—
                this.add.text(400, 100, 'ç‹¬ç«‹æµ‹è¯•æˆåŠŸï¼', {
                    font: 'bold 48px Arial',
                    fill: '#ffeb3b',
                    stroke: '#000000',
                    strokeThickness: 6
                }).setOrigin(0.5).setShadow(3, 3, '#000000', 2);
                
                // æ·»åŠ å­æ ‡é¢˜
                this.add.text(400, 180, 'Phaserå¼•æ“æ­£å¸¸è¿è¡Œ', {
                    font: '24px Arial',
                    fill: '#ffffff'
                }).setOrigin(0.5);
                
                // åˆ›å»ºç©å®¶è§’è‰²ï¼ˆçº¢è‰²æ–¹å—ï¼‰
                this.player = this.physics.add.rectangle(400, 350, 50, 50, 0xff3300);
                this.player.setOrigin(0.5);
                
                // æ·»åŠ é”®ç›˜æ§åˆ¶
                this.cursors = this.input.keyboard.createCursorKeys();
                
                // æ·»åŠ æ“ä½œæç¤º
                this.add.text(400, 550, 'â†â†’â†‘â†“ ç§»åŠ¨ | æŒ‰F12çœ‹æ§åˆ¶å°æ—¥å¿—', {
                    font: '18px Arial',
                    fill: '#cccccc'
                }).setOrigin(0.5);
                
                console.log("ğŸ‰ åœºæ™¯åˆ›å»ºå®Œæˆï¼ç©å®¶è§’è‰²å·²å°±ä½");
            }
            
            function update() {
                // ç©å®¶ç§»åŠ¨é€»è¾‘
                if (this.cursors.left.isDown) {
                    this.player.x -= 5;
                } else if (this.cursors.right.isDown) {
                    this.player.x += 5;
                }
                
                if (this.cursors.up.isDown) {
                    this.player.y -= 5;
                } else if (this.cursors.down.isDown) {
                    this.player.y += 5;
                }
                
                // è¾¹ç•Œé™åˆ¶
                this.player.x = Phaser.Math.Clamp(this.player.x, 25, 775);
                this.player.y = Phaser.Math.Clamp(this.player.y, 25, 575);
                
                // æ§åˆ¶å°å®æ—¶è¾“å‡º
                console.log(`[DEBUG] ç©å®¶ä½ç½®: (${Math.round(this.player.x)}, ${Math.round(this.player.y)})`);
            }
            
            console.log("âœ… Phaserç‹¬ç«‹å®ä¾‹åˆå§‹åŒ–æˆåŠŸï¼");
        });
    </script>
</body>
</html>